<f:if condition="{project.previewImage.0}">
    <f:then>
        <f:switch expression="{settings.detailmode}">
            <f:case value="modal">
            <f:link.action class="h-100" action="show" pageUid="{settings.detailpage}" arguments="{project:project}" additionalAttributes="{data-bs-toggle:'modal',data-bs-target:'#project-modal',data-project:project.uid}">
                <f:render section="Image" arguments="{settings:settings,project:project,imgclass:imgclass}"/>
            </f:link.action>
            </f:case>
            <f:case value="page">
            <f:link.action class="h-100" action="show" pageUid="{settings.detailpage}" arguments="{project:project}">
                <f:render section="Image" arguments="{settings:settings,project:project,imgclass:imgclass}"/>
            </f:link.action>
            </f:case>
            <f:defaultCase>
                <f:render section="Image" arguments="{settings:settings,project:project,imgclass:imgclass}"/>
            </f:defaultCase>
        </f:switch>
    </f:then>
    <f:else>
        <img class="{imgclass}" src="https://placehold.co/320x180" alt="placeholder image">
    </f:else>
</f:if>

<f:section name="Image">
    <f:variable name="image" value="{project.previewImage.0}"/>
    <f:switch expression="{project.listLayout}">
        <f:case value="card-img-right">
            <picture>
                <source srcset="{f:uri.image(image: image, maxWidth: settings.previewimagemaxwidth, cropVariant: 'default')}" media="(min-width: 1200px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '992', cropVariant: 'default')}, {f:uri.image(image: image, maxWidth: '1984', cropVariant: 'default')} 2x" media="(min-width: 992px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '768', cropVariant: 'tablet')}, {f:uri.image(image: image, maxWidth: '1536', cropVariant: 'tablet')} 2x" media="(min-width: 768px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '768', cropVariant: 'mobile')}, {f:uri.image(image: image, maxWidth: '1536', cropVariant: 'mobile')} 2x" media="(max-width: 767px)">
                <img class="w-100 h-100" style="object-fit:cover;" src="{f:uri.image(image: image, maxWidth: settings.previewimagemaxwidth, cropVariant: 'default')}" alt="{image.alternative}" longdesc="{image.description}" title="{image.title}">
            </picture>
        </f:case>
        <f:defaultCase>
            <picture>
                <source srcset="{f:uri.image(image: image, maxWidth: settings.previewimagemaxwidth, cropVariant: 'default')}" media="(min-width: 1200px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '992', cropVariant: 'default')}, {f:uri.image(image: image, maxWidth: '1984', cropVariant: 'default')} 2x" media="(min-width: 992px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '768', cropVariant: 'tablet')}, {f:uri.image(image: image, maxWidth: '1536', cropVariant: 'tablet')} 2x" media="(min-width: 768px)">
                <source srcset="{f:uri.image(image: image, maxWidth: '768', cropVariant: 'mobile')}, {f:uri.image(image: image, maxWidth: '1536', cropVariant: 'mobile')} 2x" media="(max-width: 767px)">
                <img class="{imgclass}" src="{f:uri.image(image: image, maxWidth: settings.previewimagemaxwidth, cropVariant: 'default')}" alt="{image.alternative}" longdesc="{image.description}" title="{image.title}">
            </picture>
        </f:defaultCase>
    </f:switch>
</f:section>
